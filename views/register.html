{{ define "title" }}Sign up | Repertoire Go{{ end }} {{ define "body" }}
<div class="bg-muted min-h-screen flex items-center justify-center p-4">
  <div class="flex-1 w-full max-w-md mx-auto">
    <div class="bg-card rounded-lg shadow border border-border">
      <div class="p-6 pb-4">
        <h2 class="text-2xl font-semibold tracking-tight text-card-foreground">
          Create an account
        </h2>
        <p class="text-sm text-muted-foreground mt-2">
          Enter your information below to create your account
        </p>
      </div>
      <div class="p-6 pt-0">
        <form action="/register" method="POST" novalidate>
          <div class="flex flex-col gap-4">
            <div class="flex flex-col gap-2">
              <label
                for="name"
                class="text-sm font-medium leading-none text-foreground"
              >
                Full Name
              </label>
              <input
                id="name"
                type="text"
                name="name"
                placeholder="John Doe"
                required
                value="{{ .Fields.Name }}"
                class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-0"
              />
              <p id="name-error" class="text-sm text-destructive">
                {{ .Errors.Name }}
              </p>
            </div>
            <div class="flex flex-col gap-2">
              <label
                for="signup-email"
                class="text-sm font-medium leading-none text-foreground"
              >
                Email
              </label>
              <input
                id="signup-email"
                type="email"
                name="email"
                placeholder="m@example.com"
                required
                value="{{ .Fields.Email }}"
                class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-0"
              />
              {{ if .Errors.Email }}
              <p id="email-error" class="text-sm text-destructive">
                {{ .Errors.Email }}
              </p>
              {{ else }}
              <p id="email-error" class="text-sm text-muted-foreground">
                We'll use this to contact you. We will not share your email with
                anyone else.
              </p>
              {{ end }}
            </div>
            <div class="flex flex-col gap-2">
              <label
                for="signup-password"
                class="text-sm font-medium leading-none text-foreground"
              >
                Password
              </label>
              <input
                id="signup-password"
                type="password"
                name="password"
                required
                minlength="8"
                value="{{ .Fields.Password }}"
                class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-0"
              />
              {{ if .Errors.Password }}
              <p id="password-error" class="text-sm text-destructive">
                {{ .Errors.Password }}
              </p>
              {{ else }}
              <p id="password-error" class="text-sm text-muted-foreground">
                Must be at least 8 characters long.
              </p>
              {{ end }}
            </div>
            <div class="flex flex-col gap-2">
              <label
                for="confirm-password"
                class="text-sm font-medium leading-none text-foreground"
              >
                Confirm Password
              </label>
              <input
                id="confirm-password"
                type="password"
                name="confirm-password"
                required
                value="{{ .Fields.ConfirmPassword }}"
                class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-0"
              />
              {{ if .Errors.ConfirmPassword }}
              <p id="confirm-password-error" class="text-sm text-destructive">
                {{ .Errors.ConfirmPassword }}
              </p>
              {{ else }}
              <p
                id="confirm-password-error"
                class="text-sm text-muted-foreground"
              >
                Please confirm your password.
              </p>
              {{ end }}
              <p class="text-sm text-destructive">{{ .AuthError }}</p>
            </div>
            <div class="flex flex-col gap-4">
              <button
                type="submit"
                class="inline-flex items-center justify-center rounded-md text-sm font-medium h-10 px-4 py-2 w-full bg-primary text-primary-foreground hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"
              >
                Create Account
              </button>
              <p class="text-sm text-muted-foreground text-center px-6">
                Already have an account?
                <a
                  href="/login"
                  class="underline underline-offset-4 hover:text-foreground"
                >
                  Sign in
                </a>
              </p>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script>
  const form = document.querySelector("form")

  const name = document.getElementById("name")
  const nameError = document.getElementById("name-error")

  const email = document.getElementById("signup-email")
  const emailError = document.getElementById("email-error")

  const password = document.getElementById("signup-password")
  const passwordError = document.getElementById("password-error")

  const confirmPassword = document.getElementById("confirm-password")
  const confirmPasswordError = document.getElementById("confirm-password-error")

  form.addEventListener("submit", (e) => {
    e.preventDefault()

    let hasError = false

    if (name.value == "") {
      nameError.innerHTML = "Required"
      hasError = true
    } else {
      nameError.innerHTML = ""
    }

    if (email.value == "") {
      emailError.innerHTML = "Required"
      emailError.classList = "text-sm text-destructive"
      hasError = true
    } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email.value)) {
      emailError.innerHTML = "Invalid email address"
      emailError.classList = "text-sm text-destructive"
      hasError = true
    } else {
      emailError.innerHTML =
        "We'll use this to contact you. We will not share your email with anyone else."
      emailError.classList = "text-sm text-muted-foreground"
    }

    if (password.value == "") {
      passwordError.innerHTML = "Required"
      passwordError.classList = "text-sm text-destructive"
      hasError = true
    } else if (password.value.length < 8) {
      passwordError.innerHTML = "Must be at least 8 characters long."
      passwordError.classList = "text-sm text-destructive"
      hasError = true
    } else {
      passwordError.innerHTML = "Must be at least 8 characters long."
      passwordError.classList = "text-sm text-muted-foreground"
    }

    if (confirmPassword.value == "") {
      confirmPasswordError.innerHTML = "Required"
      confirmPasswordError.classList = "text-sm text-destructive"
      hasError = true
    } else if (confirmPassword.value != password.value) {
      confirmPasswordError.innerHTML = "Passwords do not match."
      confirmPasswordError.classList = "text-sm text-destructive"
      hasError = true
    } else {
      confirmPasswordError.innerHTML = "Please confirm your password."
      confirmPasswordError.classList = "text-sm text-muted-foreground"
    }

    if (!hasError) {
      form.submit()
    }
  })
</script>
{{ end }}
